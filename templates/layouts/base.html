<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="{{ url_for('static', filename='assets/img/apple-icon.png') }}"
    />
    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', filename='assets/img/favicon.png') }}"
    />
    <title>{% block title %}GiziAI Admin Dashboard{% endblock title %}</title>

    <!--     Fonts and icons     -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700"
    />

    <!-- Nucleo Icons -->
    <link
      href="{{ url_for('static', filename='assets/css/nucleo-icons.css') }}"
      rel="stylesheet"
    />
    <link
      href="{{ url_for('static', filename='assets/css/nucleo-svg.css') }}"
      rel="stylesheet"
    />

    <!-- Font Awesome Icons -->
    <script
      src="https://kit.fontawesome.com/42d5adcbca.js"
      crossorigin="anonymous"
    ></script>

    <!-- Material Icons -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Round"
      rel="stylesheet"
    />

    <!-- CSS Files -->
    <link
      id="pagestyle"
      href="{{ url_for('static', filename='assets/css/material-dashboard.css') }}"
      rel="stylesheet"
    />

    <!-- CDN Fallback -->
    <link
      href="https://demos.creative-tim.com/material-dashboard/assets/css/material-dashboard.css"
      rel="stylesheet"
      onerror="console.warn('Using CDN fallback for Material Dashboard CSS')"
    />

    {% block stylesheets %}{% endblock stylesheets %}
  </head>

  <body class="g-sidenav-show bg-gray-200">
    <!-- Sidebar -->
    {% include 'includes/sidenav.html' %}

    <!-- Main content -->
    <main
      class="main-content position-relative max-height-vh-100 h-100 border-radius-lg"
    >
      <!-- Navbar -->
      {% include 'includes/navbar.html' %}

      <!-- Header/Page Header -->
      {% block header %}{% endblock header %}

      <!-- Page Content -->
      <div class="container-fluid py-4">
        <!-- Flash messages -->
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %} {% for category, message in messages %}
        <div class="row">
          <div class="col-12">
            <div
              class="alert alert-{{ 'danger' if category == 'error' else 'success' if category == 'success' else 'warning' if category == 'warning' else 'info' }} alert-dismissible text-white"
              role="alert"
            >
              <span class="text-sm">{{ message }}</span>
              <button
                type="button"
                class="btn-close text-lg py-3 opacity-10"
                data-bs-dismiss="alert"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          </div>
        </div>
        {% endfor %} {% endif %} {% endwith %}

        <!-- Main Content -->
        {% block content %}{% endblock content %}

        <!-- Footer -->
        {% include 'includes/footer.html' %}
      </div>
    </main>

    <!--   Core JS Files   -->
    <script src="{{ url_for('static', filename='assets/js/core/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/core/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/plugins/perfect-scrollbar.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/plugins/smooth-scrollbar.min.js') }}"></script>

    <!-- CDN Fallbacks -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      onerror="console.warn('Using CDN fallback for Bootstrap')"
    ></script>
    <script
      src="https://unpkg.com/popper.js@1/dist/umd/popper.min.js"
      onerror="console.warn('Using CDN fallback for Popper')"
    ></script>

    <!-- Charts -->
    <script src="{{ url_for('static', filename='assets/js/plugins/chartjs.min.js') }}"></script>

    <!-- Control Center for Material Dashboard -->
    <script src="{{ url_for('static', filename='assets/js/material-dashboard.min.js') }}"></script>

    {% block javascripts %}{% endblock javascripts %}

    <script>
      if (typeof $ !== "undefined") {
        $.ajaxSetup({
          beforeSend: function (xhr, settings) {
            if (
              !/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) &&
              !this.crossDomain
            ) {
              xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
            }
          },
        });
      }
    </script>
  </body>
</html>
